## 149. Max Points on a Line

找出存在于一条直线上的最多的点的个数

```
Input: [[1,1],[2,2],[3,3]]
Output: 3
Explanation:
^
|
|        o
|     o
|  o  
+------------->
0  1  2  3  4
```

这题的主要思想跟那个找矩形的差不多，主要用到的是哈希表。我这里的思路就是哈希直线的斜率以及截距，其中遇到了一些问题，也相应的做出了一些对应的解决方法

首先，将点对进行两两的计算，算出两点连成的直线的斜率以及截距，然后添加哈希表中这两点的id号，主要遇到了以下几个坑点：  
- 出现重复的点，如果哈希值存的是point类型或者x，y坐标，重复的点就不会被计算
- 直接用float存会导致例如15.99999和16.00001无法区分，实际上计算的时候的取整问题
- 后来用Fraction存一个分数类型，但是时间代价太大，最后用计算公因子的方法，化简后存储分子分母作为关键字
- 垂直于x轴的直线，斜率存inf，截距存x的截距

以下是代码

```python
# Definition for a point.
# class Point(object):
#     def __init__(self, a=0, b=0):
#         self.x = a
#         self.y = b
import collections
from fractions import Fraction 

class Solution(object):
    def maxPoints(self, points):
        """
        :type points: List[Point]
        :rtype: int
        """
        def gcd(a, b):
            m, n = a, b
            while n != 0:
                m, n = n, m % n
            return a/m ,b/m
        
        if len(points) <= 2:
            return len(points)
        self.dict = collections.defaultdict(set)
        
        for i in range(len(points)):
            for j in range(i):
                p1, p2 = points[i], points[j]
                m, n = p1.y-p2.y, p1.x-p2.x
                
                # 存float会出错
                # k = float((p1.y-p2.y))/(p1.x-p2.x) if p1.x!= p2.x else float('inf')
                # b = p1.y-k*p1.x if k != float('inf') else p1.x

                # 存Fraction时间代价太大
                # k = Fraction(m,n) if p1.x!= p2.x else float('inf')
                # b = Fraction(n*p1.y-m*p1.x, n) if k != float('inf') else p1.x
                
                # 存化简式
                k = gcd(m,n) if p1.x!= p2.x else float('inf')
                b = gcd(n*p1.y-m*p1.x, n) if k != float('inf') else p1.x
                
                
                self.dict[k,b].add(i)
                self.dict[k,b].add(j)
                
        res = 0
        for key in self.dict:
            res = max(len(self.dict[key]),res)
        return res 
```

一些测试样例
```
[[1,1],[2,2],[3,3]]
[[1,1],[3,2],[5,3],[4,1],[2,3],[1,4]]
[[0,0], [2,1]]
[[3,10],[0,2],[0,2],[3,10]]
[[0,-1],[0,3],[0,-4],[0,-2],[0,-4],[0,0],[0,0],[0,1],[0,-2],[0,4]]
[[0,-12],[5,2],[2,5],[0,-5],[1,5],[2,-2],[5,-4],[3,4],[-2,4],[-1,4],[0,-5],[0,-8],[-2,-1],[0,-11],[0,-9]]
[[29,87],[145,227],[400,84],[800,179],[60,950],[560,122],[-6,5],[-87,-53],[-64,-118],[-204,-388],[720,160],[-232,-228],[-72,-135],[-102,-163],[-68,-88],[-116,-95],[-34,-13],[170,437],[40,103],[0,-38],[-10,-7],[-36,-114],[238,587],[-340,-140],[-7,2],[36,586],[60,950],[-42,-597],[-4,-6],[0,18],[36,586],[18,0],[-720,-182],[240,46],[5,-6],[261,367],[-203,-193],[240,46],[400,84],[72,114],[0,62],[-42,-597],[-170,-76],[-174,-158],[68,212],[-480,-125],[5,-6],[0,-38],[174,262],[34,137],[-232,-187],[-232,-228],[232,332],[-64,-118],[-240,-68],[272,662],[-40,-67],[203,158],[-203,-164],[272,662],[56,137],[4,-1],[-18,-233],[240,46],[-3,2],[640,141],[-480,-125],[-29,17],[-64,-118],[800,179],[-56,-101],[36,586],[-64,-118],[-87,-53],[-29,17],[320,65],[7,5],[40,103],[136,362],[-320,-87],[-5,5],[-340,-688],[-232,-228],[9,1],[-27,-95],[7,-5],[58,122],[48,120],[8,35],[-272,-538],[34,137],[-800,-201],[-68,-88],[29,87],[160,27],[72,171],[261,367],[-56,-101],[-9,-2],[0,52],[-6,-7],[170,437],[-261,-210],[-48,-84],[-63,-171],[-24,-33],[-68,-88],[-204,-388],[40,103],[34,137],[-204,-388],[-400,-106]]
[[0,0]]
```


